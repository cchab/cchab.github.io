"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85],{39085:function(e,t,n){n.r(t);var a=n(59499),r=n(50029),i=n(87794),o=n.n(i),l=n(66432),s=n(69860),p=n(89696),c=n(80173),m=n(68783),d=n(71346),u=n.n(d),f=n(2784),x=n(35505),h=n(73767),g=n(12283),y=n(63454),b=n(61623),j=n(39249),w=n(1158),v=n(91026),C=n(72857),I=n(35546),_=n(79665),P=n(52322);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var Z=(0,x.F4)(["from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0px)}"]),k=(0,x.F4)(["0%{opacity:1;}60%{opacity:0.2;}100%{opacity:1;}"]),S=x.ZP.form.withConfig({displayName:"payment-form__Form",componentId:"sc-re1y6o-0"})(["animation:"," 0.6s ease-out;display:flex;flex-direction:column;height:100%;overflow:auto;padding:32px;"," .card-errors{animation:"," 0.6s ease-out;background:",";border-radius:30px;color:white;margin-top:16px;margin-top:6px;padding:4px 12px;width:fit-content;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{-webkit-appearance:none;margin:0;}@media (min-width:1025px){padding:44px;}@media (min-width:1200px){padding:88px;}@media (min-width:1700px){padding:96px 144px;}@media (max-width:450px){padding:32px;}"],Z,function(e){return e.isFullscreen&&(0,x.iv)(["margin:0 auto;max-width:900px;"])},b.Uo,h.colors.red),N=x.ZP.div.withConfig({displayName:"payment-form__Wrapper",componentId:"sc-re1y6o-1"})(["align-items:center;flex:1;"]),O=x.ZP.div.withConfig({displayName:"payment-form__Label",componentId:"sc-re1y6o-2"})(["color:",";font-family:",";font-size:20px;font-weight:500;letter-spacing:0px;line-height:140%;margin:24px 0 0 0;span{align-items:center;color:",";display:flex;font-size:16px;font-weight:400;line-height:120%;}"],function(e){return e.theme.foreground},h.fonts.apercu,function(e){return u()(e.theme.foreground).alpha(.6).string()}),D=x.ZP.div.withConfig({displayName:"payment-form__FormRow",componentId:"sc-re1y6o-3"})(["float:left;max-width:500px;width:100%;"]),F=x.ZP.input.withConfig({displayName:"payment-form__Input",componentId:"sc-re1y6o-4"})(["-webkit-appearance:none;background:transparent;border:none;border-radius:0px;color:",";font-family:",";font-size:24px;letter-spacing:0.5px;line-height:22px;margin-bottom:8px;outline:none;padding:8px 0 0 0;width:100%;@media (max-width:450px){font-size:16px;}@media (max-height:600px){font-size:20px;}::placeholder{color:",";}"," ",""],h.colors.black,h.fonts.apercu,h.colors.lightGrey,function(e){return e.align&&(0,x.iv)(["text-align:",";::placeholder{text-align:",";"],e.align,e.align)},function(e){return e.animate&&(0,x.iv)(["animation:"," 0.3s ease-out;"],b.Uo)}),z=x.ZP.div.withConfig({displayName:"payment-form__CreditCardWrapper",componentId:"sc-re1y6o-5"})(["align-items:flex-start;background:",";border-radius:24px;box-shadow:0px 2px 1px 0px ",";display:flex;flex-direction:column;justify-content:space-between;min-height:47vh;padding:48px 24px;@media (max-width:450px){padding:24px;border-radius:24px;min-height:45vh;}@media (max-height:560px){padding:16px 24px !important;border-radius:24px;min-height:55vh;}"],h.colors.greyBackground,function(e){return u()(e.theme.foreground).alpha(.3).string()}),A=x.ZP.div.withConfig({displayName:"payment-form__CreditCardIconsWrapper",componentId:"sc-re1y6o-6"})(["display:flex;justify-content:flex-end;margin-top:-24px;transform:scale(1.1);transform-origin:right center;width:100%;@media (max-width:450px){margin-top:0px;}@media (max-height:560px){margin-top:0px !important;}"]),T=(0,x.ZP)(I.ci).withConfig({displayName:"payment-form__CreditCardIconWrapper",componentId:"sc-re1y6o-7"})(["fill:",";"],function(e){return e.theme.foregroundButton}),q=x.ZP.div.withConfig({displayName:"payment-form__Stripe",componentId:"sc-re1y6o-8"})(["align-items:center;color:",";display:flex;font-size:14px;letter-spacing:0px;svg{fill:",";}"],function(e){return u()(e.theme.foreground).alpha(1).string()},function(e){return u()(e.theme.foreground).alpha(1).string()}),R=x.ZP.div.withConfig({displayName:"payment-form__ContactDetailWrapper",componentId:"sc-re1y6o-9"})(["align-items:flex-start;display:flex;flex-direction:column;margin:0;width:100%;"]),W=x.ZP.div.withConfig({displayName:"payment-form__PaymentComplete",componentId:"sc-re1y6o-10"})(["animation:"," 0.7s ease-in-out infinite;display:flex;flex-direction:row;"],k),L=function(e){var t=e.amount,n=e.buttonRadius,a=e.contactInfo,i=e.currency,d=e.isDataCollectionDisabled,u=e.onSubmit,x=e.questionId,y=e.isFullscreen,E=e.t,Z=(0,h.formatAmountToDisplayWithCurrency)(i,t),k={style:{base:{color:"".concat(h.colors.black),fontFamily:"".concat(h.fonts.apercu),letterSpacing:"0.5px",fontSmoothing:"antialiased",fontSize:window.innerWidth>450?"24px":"16px","::placeholder":{color:"".concat(h.colors.lightGrey)}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},L=(0,l.useElements)(),Y=(0,l.useStripe)(),B=(0,f.useState)(null),G=B[0],M=B[1],X=(0,f.useState)(),H=X[0],U=X[1],Q=(0,f.useState)(!1),J=Q[0],K=Q[1],V=(0,f.useState)(!1),$=V[0],ee=V[1],et=(0,f.useState)((null==a?void 0:a.name)||""),en=et[0],ea=et[1],er=(0,f.useState)((null==a?void 0:a.email)||""),ei=er[0],eo=er[1];(0,f.useEffect)(function(){d||function(){e.apply(this,arguments)}();function e(){return(e=(0,r.Z)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_.vn)(x);case 3:U(e.sent.client_secret),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),(0,w.BQ)("[GENERATE STRIPE PAYMENT INTENT] ".concat(e.t0.name),{questionId:x},e.t0);case 11:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}},[d,x]);var el,es=function(e){e.error?M(e.error.message):M(null)},ep=(el=(0,r.Z)(o().mark(function e(t){var n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!d){e.next=6;break}return ee(!0),K(!1),setTimeout(function(){var e="fakePaymentIntentId",t={payment:{id:e,name:en||null,email:ei||null}};u((0,j.Hn)(e,t))},2e3),e.abrupt("return");case 6:if(!(""===en||null===en)){e.next=9;break}return M("Please fill in your name"),e.abrupt("return");case 9:if(!(""===ei||null===ei)){e.next=12;break}return M("Please fill in your email"),e.abrupt("return");case 12:if(!(!Y||!L)){e.next=14;break}return e.abrupt("return");case 14:return K(!0),e.next=17,Y.confirmCardPayment(H,{payment_method:{card:L.getElement(l.CardElement),billing_details:{name:en,email:ei}},receipt_email:ei||null});case 17:(n=e.sent).error?(M(n.error.message),K(!1),ee(!1)):(M(null),ee(!0),K(!1),setTimeout(function(){var e={payment:{id:n.paymentIntent.id,status:n.paymentIntent.status,created_at:n.paymentIntent.created,currency:n.paymentIntent.currency,amount:n.paymentIntent.amount,name:en||null,email:ei||null}};u((0,j.Hn)(n.paymentIntent.id,e))},2e3));case 19:case"end":return e.stop()}},e)})),function(e){return el.apply(this,arguments)}),ec=function(e){return eo(e.target.value)},em=function(e){return ea(e.target.value)};return(0,P.jsxs)(S,{"data-qa":"payment-form",isFullscreen:y,onSubmit:ep,children:[(0,P.jsxs)(N,{children:[(0,P.jsxs)(z,{children:[(0,P.jsx)(A,{children:(0,P.jsx)(I.o4,{})}),(0,P.jsxs)(D,{children:[(0,P.jsx)(C.lX,{htmlFor:"card-element",children:(0,P.jsx)(g.Eb,{assetId:"form-page.payment-form.form-label.creditcard"})}),(0,P.jsx)(s.Z,{bottom:1}),d?(0,P.jsxs)(p.Z,{orientation:"horizontal",width:"full",children:[(0,P.jsx)(m.ZP,{children:(0,P.jsx)(F,{animate:!0,placeholder:"Card number"})}),(0,P.jsx)(m.ZP,{width:"remaining",children:(0,P.jsx)(F,{align:"right",animate:!0,placeholder:"MM / YY"})})]}):(0,P.jsx)(l.CardElement,{id:"card-element",onChange:es,options:k})]}),(0,P.jsxs)(R,{children:[(0,P.jsx)(C.lX,{htmlFor:"card-element",children:(0,P.jsx)(g.Eb,{assetId:"form-page.payment-form.form-label.name"})}),(0,P.jsx)(F,{animate:!0,"aria-label":E("form-page.contact-form.placeholder-name"),autoComplete:"name",maxLength:"56",name:"name",onChange:em,placeholder:E("form-page.contact-form.placeholder-name"),type:"text",value:en})]}),(0,P.jsxs)(R,{children:[(0,P.jsx)(C.lX,{htmlFor:"card-element",children:(0,P.jsx)(g.Eb,{assetId:"form-page.payment-form.form-label.email"})}),(0,P.jsx)(F,{animate:!0,"aria-label":E("form-page.contact-form.placeholder-email"),autoComplete:"email",maxLength:"56",name:"email",onChange:ec,placeholder:E("form-page.contact-form.placeholder-email"),type:"email",value:ei})]})]}),G&&(0,P.jsx)("div",{className:"card-errors",role:"alert",children:G}),(0,P.jsxs)(O,{"aria-live":"assertive",children:[(0,P.jsx)("span",{children:(0,P.jsx)(g.Eb,{assetId:"form-page.payment-form.subtitle"})}),(0,P.jsxs)(q,{children:[(0,P.jsx)(b.mB,{}),(0,P.jsx)(s.Z,{left:1}),"Secured by",(0,P.jsx)(s.Z,{left:.6}),(0,P.jsx)(I.Lx,{})]})]})]}),(0,P.jsx)(s.Z,{top:3}),J?(0,P.jsxs)(v.Av,{buttonRadius:n,"data-qa":"submit-button",disabled:!0,children:[(0,P.jsx)(c.Z,{}),"\xa0\xa0",(0,P.jsx)(g.Eb,{assetId:"form-page.payment-form.pay-button-processing"})]}):$?(0,P.jsx)(v.Av,{buttonRadius:n,"data-qa":"submit-button",disabled:!0,children:(0,P.jsxs)(W,{children:[(0,P.jsx)("span",{"aria-label":"payment complete",role:"img",children:"\uD83D\uDC4D"}),(0,P.jsx)(s.Z,{left:1}),(0,P.jsx)(g.Eb,{assetId:"form-page.payment-form.pay-button-done"})," ",Z]})}):(0,P.jsxs)(v.Av,{buttonRadius:n,"data-qa":"submit-button",disabled:!Y&&!d,type:"submit",children:[(0,P.jsx)(T,{}),(0,P.jsx)(s.Z,{left:1}),(0,P.jsx)(g.Eb,{assetId:"form-page.payment-form.pay-button"})," ",Z]})]})},Y=function(e){var t=e.isDataCollectionDisabled,n=e.stripeConnectedAccount,r=(0,f.useState)(null),i=r[0],o=r[1];return(0,f.useEffect)(function(){if(!t){var e=function(){o(window.Stripe((0,y._7)(),{locale:"auto",stripeAccount:n}))};window.Stripe?e():document.querySelector("#stripe-js").addEventListener("load",function(){e()})}},[t,n]),(0,P.jsx)(l.Elements,{stripe:i,children:(0,P.jsx)(L,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))})};t.default=(0,v.I0)((0,g.Nm)(Y))}}]);